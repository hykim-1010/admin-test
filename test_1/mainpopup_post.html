<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MAIN 공통 관리 &gt; 메인 팝업 &gt; 등록</title>
  <style>
    :root {
      --gray-50: #f7f7f8;
      --gray-100: #eef0f3;
      --gray-200: #e1e4e8;
      --gray-300: #cfd6dd;
      --gray-400: #b6bec8;
      --text-strong: #1b2430;
      --text: #2f3a4a;
      --primary: #2a7de1;
      --primary-dark: #1d5fb0;
      --danger: #e53935;
    }
    html, body { height: 100%; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", Arial, sans-serif; color: var(--text); line-height: 1.45; font-size: 15px; }

    .container { padding: 12px 16px 20px; position: relative; }

    /* Meta strip (template rules) */
    .meta { display: grid; grid-template-columns: 240px 64px 1fr 70px 200px 110px 70px 52px 40px; gap: 6px; align-items: stretch; border: 1px solid var(--gray-300); background: var(--gray-50); padding: 6px; border-radius: 6px; width: 100%; box-sizing: border-box; }
    .meta-title { background: #fff; border: 1px solid var(--gray-300); padding: 6px 8px; font-weight: 700; display: flex; align-items: center; }
    .meta-chip { background: #6f7785; color: #fff; font-weight: 700; display: flex; align-items: center; justify-content: center; padding: 0 10px; border-radius: 2px; }
    .meta-value { background: #fff; border: 1px solid var(--gray-300); padding: 6px 8px; display: flex; align-items: center; }
    .meta-chip.small { padding: 0 6px; }
    .meta-value.small { justify-content: center; }

    .section-title { margin: 16px 0 12px; font-size: 20px; font-weight: 800; }

    .layout { display: grid; grid-template-columns: 1fr 300px; gap: 16px; align-items: start; width: 100%; box-sizing: border-box; }
    .card { border: 1px solid var(--gray-300); border-radius: 6px; background: #fff; padding: 12px; width: 100%; max-width: 100%; overflow: hidden; box-sizing: border-box; }

    /* Form grid */
    .form { display: grid; gap: 12px; max-width: 100%; }
    .row { display: grid; grid-template-columns: 160px 1fr; gap: 12px; align-items: center; }
    .row .label { font-weight: 700; color: #3a4556; display: flex; gap: 8px; align-items: center; }
    .row .req { color: var(--danger); font-weight: 900; }
    .req { color: var(--danger); font-weight: 900; }
    .control, .control-inline { display: flex; gap: 6px; align-items: center; }
    .input, .select, .textarea { height: 32px; border: 1px solid var(--gray-300); border-radius: 6px; padding: 0 10px; font-size: 14px; min-width: 575px; max-width: 100%; box-sizing: border-box; }
    .textarea { height: 120px; padding: 10px; resize: vertical; min-width: 575px; max-width: 100%; box-sizing: border-box; }
    .radio-group { display: flex; gap: 18px; align-items: center; }
    .row { border-bottom: 1px solid var(--gray-200); padding-bottom: 10px; }
    .row:last-of-type { border-bottom: 0; }
    .hint { color: #8e99a8; font-size: 13px; }

    .btn { height: 34px; border: 1px solid var(--gray-300); border-radius: 6px; background: #fff; padding: 0 14px; cursor: pointer; font-size: 14px; }
    .btn.primary { background: var(--text-strong); color: #fff; border-color: #191f28; }
    .btn.ghost { background: #fff; }
    .btn.danger { background: #fff; border-color: var(--danger); color: var(--danger); }

    /* File control */
    .filebox { display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center; width: 575px; max-width: 575px; }
    .filebox .textbox { height: 32px; border: 1px solid var(--gray-300); border-radius: 6px; padding: 0 10px; background: #fafbfc; color: #8e99a8; font-size: 14px; display: flex; align-items: center; }
    .filebox input[type="file"] { display: none; }

    /* Actions */
    .actions { display: flex; justify-content: flex-end; gap: 12px; margin-top: 14px; }

    /* Table-like helper for date range */
    .date-range { display: grid; grid-template-columns: 160px 1fr; gap: 10px; align-items: center; border-bottom: 1px solid var(--gray-200); padding-bottom: 10px; margin-bottom: 10px; }
    .date-controls { display: grid; grid-template-columns: 1fr 80px 24px 1fr 80px; gap: 8px; align-items: center; width: 575px; max-width: 575px; }
    .date-controls .input, .date-controls .select { min-width: 0; width: 100%; }
    .w-575 { width: 575px; max-width: 575px; box-sizing: border-box; }
    .separator { text-align: center; color: #8e99a8; }

    /* Badges (1.25x) & overlay */
    .badge { display: inline-flex; align-items: center; justify-content: center; width: 22px; height: 22px; border-radius: 50%; background: #e53935; color: #fff; font-weight: 700; font-size: 14px; vertical-align: middle; }
    .badge-layer { position: absolute; inset: 0; pointer-events: none; z-index: 1000; }
    .badge.draggable { position: absolute; pointer-events: auto; cursor: grab; box-shadow: 0 1px 2px rgba(0,0,0,0.2); user-select: none; }
    .badge.draggable:active { cursor: grabbing; }

    @media (max-width: 1200px) { .layout { grid-template-columns: 1fr; } }
  </style>
  <script>
    (function(){
      function q(sel){ return document.querySelector(sel); }
      function qa(sel){ return document.querySelectorAll(sel); }

      // Badge render logic (count from Description)
      function getBadgeCount(){ return qa('.desc-list .desc-item .head').length || 0; }
      function loadPositions(count){
        try{ var arr = JSON.parse(localStorage.getItem('badgePositions_post')||'[]'); if(!Array.isArray(arr)) arr=[]; while(arr.length<count) arr.push({x:16+arr.length*26,y:16}); return arr.slice(0,count);}catch(e){ return Array.from({length:count},(_,i)=>({x:16+i*26,y:16})); }
      }
      function savePositions(p){ try{ localStorage.setItem('badgePositions_post', JSON.stringify(p)); }catch(e){} }
      function makeDraggable(el, pos, i){
        var sx=0, sy=0, ox=0, oy=0, mv=false;
        function down(e){ mv=true; el.style.cursor='grabbing'; sx=(e.touches?e.touches[0].clientX:e.clientX); sy=(e.touches?e.touches[0].clientY:e.clientY); ox=parseFloat(el.style.left)||0; oy=parseFloat(el.style.top)||0; document.addEventListener('mousemove', move); document.addEventListener('mouseup', up); document.addEventListener('touchmove', move,{passive:false}); document.addEventListener('touchend', up); }
        function move(e){ if(!mv) return; if(e.touches) e.preventDefault(); var cx=(e.touches?e.touches[0].clientX:e.clientX), cy=(e.touches?e.touches[0].clientY:e.clientY); var nx=ox+(cx-sx), ny=oy+(cy-sy); var maxX=window.innerWidth-el.offsetWidth-2, maxY=window.innerHeight-el.offsetHeight-2; nx=Math.max(2,Math.min(maxX,nx)); ny=Math.max(2,Math.min(maxY,ny)); el.style.left=nx+'px'; el.style.top=ny+'px'; }
        function up(){ if(!mv) return; mv=false; el.style.cursor='grab'; pos[i]={x:parseFloat(el.style.left)||0,y:parseFloat(el.style.top)||0}; savePositions(pos); document.removeEventListener('mousemove', move); document.removeEventListener('mouseup', up); document.removeEventListener('touchmove', move); document.removeEventListener('touchend', up); }
        el.addEventListener('mousedown', down); el.addEventListener('touchstart', down, {passive:true});
      }
      function renderBadges(){ var c=getBadgeCount(), p=loadPositions(c), layer=q('.badge-layer')||document.body.appendChild(Object.assign(document.createElement('div'),{className:'badge-layer'})); layer.innerHTML=''; for(var i=0;i<c;i++){ var b=document.createElement('div'); b.className='badge draggable'; b.textContent=(i+1); b.style.left=(p[i].x||16)+'px'; b.style.top=(p[i].y||16)+'px'; layer.appendChild(b); makeDraggable(b,p,i);} }

      // Meta Path sync
      function syncPath(){ var t=q('#section-title')?.textContent||''; var mp=q('#meta-path'); if(mp) mp.textContent=t; }

      // File control wiring
      function wireFileControls(){
        qa('[data-filebox]').forEach(function(box){
          var input = box.querySelector('input[type=file]');
          var text = box.querySelector('.textbox');
          var btn  = box.querySelector('[data-action="pick"]');
          var del  = box.querySelector('[data-action="clear"]');
          btn?.addEventListener('click', function(){ input?.click(); });
          input?.addEventListener('change', function(){ text.textContent = input.files?.[0]?.name || '선택된 파일이 없습니다.'; });
          del?.addEventListener('click', function(){ if(input){ input.value=''; text.textContent='선택된 파일이 없습니다.'; } });
        });
      }

      window.addEventListener('DOMContentLoaded', function(){ syncPath(); renderBadges(); wireFileControls(); });
      window.addEventListener('resize', function(){ var layer=document.querySelector('.badge-layer'); if(!layer) return; Array.prototype.forEach.call(layer.children, function(b){ var maxX=window.innerWidth-b.offsetWidth-2, maxY=window.innerHeight-b.offsetHeight-2; var nx=Math.min(maxX, parseFloat(b.style.left)||0); var ny=Math.min(maxY, parseFloat(b.style.top)||0); b.style.left=Math.max(2,nx)+'px'; b.style.top=Math.max(2,ny)+'px'; }); });
    })();
  </script>
</head>
<body>
  <div class="container">
    <div class="meta card">
      <div class="meta-title">하나투어 관리자 페이지</div>
      <div class="meta-chip">Path</div>
      <div class="meta-value" id="meta-path"></div>
      <div class="meta-chip">Writer</div>
      <div class="meta-value">The Uber Creative</div>
      <div class="meta-chip">Date / Version</div>
      <div class="meta-value small">2024</div>
      <div class="meta-chip small">page</div>
      <div class="meta-value small">6</div>
    </div>

    <div class="section-title" id="section-title">MAIN 공통 관리 &gt; 메인 팝업 &gt; 등록</div>

    <div class="layout">
      <div class="card">
        <form class="form" onsubmit="return false;" aria-label="메인 팝업 등록 폼">
          <div class="row">
            <div class="label">언어</div>
            <div class="radio-group">
              <label><input type="radio" name="lang" value="KR" checked> KR</label>
              <label><input type="radio" name="lang" value="EN"> EN</label>
              <label><input type="radio" name="lang" value="CN"> CN</label>
              <label><input type="radio" name="lang" value="JP"> JP</label>
            </div>
          </div>

          <div class="row" data-num="1">
            <div class="label">유형 <span class="req">*</span></div>
            <div class="control-inline">
              <select class="select" aria-label="유형">
                <option>이미지</option>
                <option>이미지+텍스트</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="label">제목 <span class="req">*</span></div>
            <div class="control-inline">
              <input type="text" class="input" placeholder="제목을 입력해주세요." aria-label="제목" />
            </div>
          </div>

          <div class="row" data-num="2">
            <div class="label">팝업 이미지(PC) <span class="req">*</span></div>
            <div class="control">
              <div class="filebox" data-filebox>
                <div class="textbox">선택된 파일이 없습니다.</div>
                <button class="btn" type="button" data-action="pick">파일 선택</button>
                <button class="btn danger" type="button" title="삭제" data-action="clear">삭제</button>
                <input type="file" accept="image/png, image/jpeg" />
              </div>
              <div class="hint">※ 팝업 사이즈: 500 x 360 / 파일형식: JPG, PNG / 용량: 30MB 이하</div>
            </div>
          </div>

          <div class="row">
            <div class="label">팝업 이미지(Mobile) <span class="req">*</span></div>
            <div class="control">
              <div class="filebox" data-filebox>
                <div class="textbox">선택된 파일이 없습니다.</div>
                <button class="btn" type="button" data-action="pick">파일 선택</button>
                <button class="btn danger" type="button" title="삭제" data-action="clear">삭제</button>
                <input type="file" accept="image/png, image/jpeg" />
              </div>
              <div class="hint">※ 팝업 사이즈: 500 x 360 / 파일형식: JPG, PNG / 용량: 30MB 이하</div>
            </div>
          </div>

          <div class="row">
            <div class="label">링크 URL</div>
            <div class="control" style="flex-direction: column; align-items: stretch; gap: 6px;">
              <div class="radio-group">
                <label><input type="radio" name="target" value="_self" checked> 본창</label>
                <label><input type="radio" name="target" value="_blank"> 새창</label>
              </div>
              <input type="text" class="input w-575" placeholder="https://" aria-label="링크 URL" />
            </div>
          </div>

          <div class="date-range" data-num="3">
            <div class="label" style="font-weight:700;">노출기간 <span class="req">*</span></div>
            <div class="date-controls">
              <input type="date" class="input w-575" aria-label="시작일" />
              <select class="select" aria-label="시작 시각">
                <option>00시</option>
                <option>01시</option>
                <option>02시</option>
                <option>03시</option>
                <option>04시</option>
                <option>05시</option>
                <option>06시</option>
                <option>07시</option>
                <option>08시</option>
                <option>09시</option>
                <option>10시</option>
                <option>11시</option>
                <option>12시</option>
                <option>13시</option>
                <option>14시</option>
                <option>15시</option>
                <option>16시</option>
                <option>17시</option>
                <option>18시</option>
                <option>19시</option>
                <option>20시</option>
                <option>21시</option>
                <option>22시</option>
                <option>23시</option>
              </select>
              <div class="separator">~</div>
              <input type="date" class="input w-575" aria-label="종료일" />
              <select class="select" aria-label="종료 시각">
                <option>00시</option>
                <option>01시</option>
                <option>02시</option>
                <option>03시</option>
                <option>04시</option>
                <option>05시</option>
                <option>06시</option>
                <option>07시</option>
                <option>08시</option>
                <option>09시</option>
                <option>10시</option>
                <option>11시</option>
                <option>12시</option>
                <option>13시</option>
                <option>14시</option>
                <option>15시</option>
                <option>16시</option>
                <option>17시</option>
                <option>18시</option>
                <option>19시</option>
                <option>20시</option>
                <option>21시</option>
                <option>22시</option>
                <option>23시</option>
              </select>
            </div>
          </div>

          <div class="row" data-num="3-aux">
            <div class="label" style="font-weight:700;">노출여부 <span class="req">*</span></div>
            <div class="radio-group">
              <label><input type="radio" name="visible" value="Y" checked> Y</label>
              <label><input type="radio" name="visible" value="N"> N</label>
            </div>
          </div>

          <div class="actions">
            <button class="btn ghost" type="button" data-num="5">목록</button>
            <button class="btn primary" type="submit" data-num="4">등록</button>
          </div>
        </form>
      </div>

      <aside class="aside card" aria-label="Description">
        <div class="title">Description</div>
        <div class="desc-list">
          <div class="desc-item">
            <div class="head">1. 유형</div>
            <ul>
              <li>이미지, 이미지+텍스트</li>
            </ul>
          </div>
          <div class="desc-item">
            <div class="head">2. 팝업 이미지</div>
            <ul>
              <li>PC/Mobile 이미지 등록</li>
              <li>사이즈 500 x 360, 형식 JPG/PNG, 용량 30MB 이하</li>
            </ul>
          </div>
          <div class="desc-item">
            <div class="head">3. 노출기간</div>
            <ul>
              <li>기본은 현재 기준 다음날 00시~</li>
              <li>양쪽 모두 00시~24시 선택 가능</li>
            </ul>
          </div>
          <div class="desc-item">
            <div class="head">4. 등록</div>
            <ul>
              <li>필수값 미입력 시 알럿 노출</li>
            </ul>
          </div>
          <div class="desc-item">
            <div class="head">5. 목록</div>
            <ul>
              <li>클릭 시 목록 페이지로 이동</li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </div>
</body>
</html>


